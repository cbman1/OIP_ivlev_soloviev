## Ивлев Илья, Соловьев Данил 11-103

---

## **README к Заданию №3**

### Описание

Реалезация булева поиска по текстовым документам. Основные задачи:

1.  **Построение инвертированного индекса:** Создание структуры данных, которая отображает каждую уникальную лемму (базовую форму слова) на список документов, в которых она встречается.
2.  **Реализация булева поиска:** Предоставление пользователю возможности вводить поисковые запросы с использованием логических операторов **AND** (И), **OR** (ИЛИ), **NOT** (НЕ) и **скобок** для группировки выражений. Поиск выполняется по построенному инвертированному индексу.
3.  **Отображение результатов:** Вывод списка найденных документов с указанием их идентификаторов (`выкачкаN`)
дополнительно вместе с соответствующих им URL-адресов (из `index.txt`).

### Файлы проекта (`task3/`)

*   **`build_index.py`**:
    *   Читает файлы `lemmas.txt` из папки `../task2/task2_output/`.
    *   Строит инвертированный индекс (`лемма -> {id1, id2, ...}`).
    *   Собирает множество всех уникальных идентификаторов документов (`{id1, id2, ...}`).
    *   Сохраняет построенный индекс и список всех документов в файлы `inverted_index.json` и `all_docs.json` в папке `task3/`.
*   **`search.py`**:
    *   Загружает файлы `inverted_index.json` и `all_docs.json`.
    *   Загружает файл `../task1/index.txt` для получения соответствия `выкачкаN -> URL`.
    *   Запускает консоль, принимая булевы запросы от пользователя.
    *   Обрабатывает запрос: токенизирует, лемматизирует термы, преобразует в RPN (Обратную Польскую Запись) и вычисляет результат по инвертированному индексу.
    *   Выводит список найденных документов с их ID и URL.

### Дополнительные файлы и структура директорий
*   **Выходные данные (генерируются `build_index.py` в папке `task3/`):**
    *   `inverted_index.json`: JSON-файл, содержащий инвертированный индекс (словарь, где ключ - лемма, значение - список ID документов).
    *   `all_docs.json`: JSON-файл, содержащий список всех уникальных ID документов (`выкачкаN`).

### Deployment Manual (Инструкция по запуску)

1.  **Предварительные шаги:**
    *   Убедитесь что есть выкачка и ее обработка (из task1, task2).
    *   Убедитесь в корректности путей
    *   Необходимые выходные файлы (`../task1/index.txt` и содержимое `../task2/task2_output/`) должны существовать в указанных относительных путях от папки `task3/`.
2.  **Построение индекса:**
    *   Построение индекса:
        ```bash
        python build_index.py
        ```
3.  **Запуск поиска:**
    *   Скрипт поиска:
        ```bash
        python search.py
        ```
    *   Скрипт загрузит индекс и карту URL. Появится приглашение `Запрос>`.
    *   Введите ваш булев запрос, например: `(музей AND сибирь) OR (ханты NOT мансийск)`.
    *   Для выхода из режима поиска введите `quit` или `exit`.

### Предварительные требования

*   Python 3.7+.
*   task1, task2 done
*   Библиотека `pymorphy2` (необходима для лемматизации термов в поисковом запросе):
    ```bash
    pip install pymorphy2
    ```